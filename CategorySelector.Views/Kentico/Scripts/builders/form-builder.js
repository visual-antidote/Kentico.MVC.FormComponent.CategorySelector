!function(){"use strict";var e,t={5018:function(e,t,i){var n;i.d(t,{p:function(){return n}}),function(e){e.Section="SECTION",e.Widget="WIDGET"}(n||(n={}))},6562:function(e,t,i){var n=i(7945),o=i(9511),r=i(22),a=i(9148),s=i(8076);t.Z=(0,n.$)((({popup:e},{sectionIdentifier:t})=>({isSectionListOpen:e.componentIdentifier===t&&e.popupType===a.kQ.AddSection})),(()=>({closePopup:o.j4,openPopup:(e,t,i)=>(0,r.Mw)(e,a.kQ.AddSection,t,i),setPopupPosition:o.FO})))(s.Z)},2817:function(e,t,i){i.r(t),i.d(t,{LinkType:function(){return n.U}});var n=i(9825)},9887:function(e,t,i){i.d(t,{Gq:function(){return o},iV:function(){return r},r1:function(){return a},vo:function(){return s}});var n=i(3583);const o=(e,t)=>{const i=Object.values(t);return null===e?i:e.length?i.filter((t=>l(e,t.typeIdentifier))):[]},r=(e,t)=>null===e||!!e.length&&l(e,t),a=(e,t)=>e&&n.T.contains(e,t),s=(e,t)=>null===e||null===t?null!=e?e:t:null==e?void 0:e.filter((e=>l(t,e))),l=(e,t)=>e.some((e=>n.kA.equalsIgnoreCase(e,t)))},8047:function(e,t,i){i.d(t,{iV:function(){return s},vs:function(){return a},wU:function(){return r}});const n=Object.prototype.hasOwnProperty,o=(e,t)=>e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t,r=(e,t)=>{if(o(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(let r=0;r<i.length;r++)if(!n.call(t,i[r])||!o(e[i[r]],t[i[r]]))return!1;return!0},a=e=>Array.isArray(e)?e.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:{type:null}})),{}):e,s=e=>Object.keys(e).reduce(((t,i)=>t.concat(e[i])),[])},3583:function(e,t,i){i.d(t,{Rv:function(){return c},T:function(){return l},Yr:function(){return d},iq:function(){return u},kA:function(){return s},qw:function(){return f},rq:function(){return a}});var n=i(9123),o=i(9148),r=i(9868);const a={isEmpty(e){return e.constructor===Object&&0===Object.keys(e).length},assignDefined(e,...t){for(const i of t)for(const t of Object.keys(i)){const n=i[t];void 0!==n&&(e[t]=n)}return e}},s={format(e,...t){let i=e;return t.forEach(((e,t)=>{i=i.replace(new RegExp("\\{"+t+"\\}","g"),e)})),i},equalsIgnoreCase(e,t){return 0===e.localeCompare(t,void 0,{sensitivity:"base"})}},l={insertItemIntoArray(e,t,i){return i>e.length||i<0?e:[...e.slice(0,i),t,...e.slice(i)]},replaceItem:(e,t,i)=>!e.length||i>e.length||i<0?e:[...e.slice(0,i),t,...e.slice(i+1)],removeItem:(e,t)=>t>e.length||t<0?e:[...e.slice(0,t),...e.slice(t+1)],moveItemBetweenArrays:(e,t,i,n=null)=>{const o=null===n?e.length-1:n.length;if(i<0||i>o)throw new RangeError("The [position] argument is invalid.");if(!l.contains(e,t))throw new Error("The [item] was not found in [sourceArray].");const r=e.filter((e=>e!==t));return null===n?{sourceArray:l.insertItemIntoArray(r,t,i),destinationArray:null}:{sourceArray:r,destinationArray:l.insertItemIntoArray(n,t,i)}},getUniqueValues:(e,t=(e=>e))=>[...new Set(e.map(t))],contains:(e,t)=>e.indexOf(t)>=0,move:(e,t,i)=>(e.splice(i,0,e.splice(t,1)[0]),e),swap:(e,t,i)=>{const[n,o]=t>i?[i,t]:[t,i];return[...e.slice(0,n),e[o],...e.slice(n+1,o),e[n],...e.slice(o+1)]},toRecord:(e,t)=>e.reduce(((e,i)=>(e[i[t]]=i,e)),{})},d={dispatchEvent:(e,t)=>{const i=new CustomEvent(e,{detail:t});document.dispatchEvent(i)},getEventPath:e=>{let t=[],i=e.target;if(e.path)t=e.path;else for(;i;)t.push(i),i=i.parentElement;return t.filter((e=>e instanceof Node))}},c={removeSectionFromDragAndDrop:e=>{d.dispatchEvent(n.sh,{sectionIdentifier:e})},mountSectionToDragAndDropAfterNextTick:(e,t)=>{e.$nextTick((()=>{c.mountSectionToDragAndDrop(t)}))},mountSectionToDragAndDrop:e=>{d.dispatchEvent(n.eD,{sectionIdentifier:e})}},u={disableDocumentLinks:()=>{const e=document.getElementsByTagName("a"),t=e.length;for(let i=0;i<t;i++)e[i].onclick=()=>!1},disableElementLinks:e=>{const t=e.getElementsByTagName("a"),i=t.length;let n;for(let e=0;e<i;e++)n=t[e],n.closest("div[data-inline-editor]")||(n.onclick=()=>!1)}},f={getTheme:e=>{switch(e){case o.kQ.AddWidget:case o.kQ.Personalization:return r.Q2.Widget;case o.kQ.AddSection:case o.kQ.ChangeSection:return r.Q2.Section}},isFriendlyElementSelected:(e,t)=>d.getEventPath(e).some((e=>t.some((t=>{const i=document.querySelector(t);return i&&(i===e||i.contains(e))})))),doesElementOrAncestor(e,t,i){let n=e;for(;n;){if(i(n))return!0;if(t&&t===n)break;n=n.parentElement}return!1}}},1698:function(e,t,i){i.d(t,{u:function(){return s}});var n=i(6988),o=i(9887),r=i(9148),a=i(9868);const s=(e,t,i,s)=>{var l;if(![r.kQ.AddWidget,r.kQ.AddSection].includes(e))return[];const d=(0,n.ko)(a.rv.PopUpElementsService),c=e===r.kQ.AddWidget,u=c?t.widgets:t.sections,f=c?(0,o.vo)(i.widgetRestrictions,null!==(l=null==s?void 0:s.widgetRestrictions)&&void 0!==l?l:null):i.sectionRestrictions,p=(0,o.Gq)(f,u);return c?d.getWidgetElements(p):d.getSectionElements(p)}},932:function(e,t,i){i.d(t,{b:function(){return o},o:function(){return s}});var n=i(9148);const o=(e,t,i=!1)=>{const o=a(e),s=i?r(t):t/2;return o.left<s?n.Mi.Right:o.right<s?n.Mi.Left:n.Mi.Center},r=e=>{const t=document.body.querySelector("kentico-pop-up-container");return t&&t.offsetWidth?t.offsetWidth/2:e},a=e=>({left:e.left,right:window.innerWidth-e.right}),s=e=>({left:e.left+e.width/2+pageXOffset,top:e.top+e.height+10+pageYOffset})},3342:function(e,t,i){i.d(t,{Q:function(){return c}});var n=i(4122),o=i.n(n),r=i(3439),a=i(1201),s=i(262),l=i(6550);let d=!1;const c=(e,t,i,n,d,c)=>(0,r.U)((()=>{if(!e)return;n&&(0,l.y)(),f(e);const r=n?u(e):{},p=(0,a.v)(i,t,r),g=(0,s.J)(p,t,r,d);c&&c(g),new(o())(e,g)})),u=e=>{const t=e.dataset.richTextEditorConfiguration,{richTextEditor:i}=window.kentico.pageBuilder,n=i&&i.configurations&&i.configurations[t];return"object"==typeof n?n:{}},f=e=>{if(d)return;const{enableImageRecognition:t,getLinkMetadataEndpointUrl:i,richTextEditorLicense:o,contextMacros:r,getImageDescriptionEndpointUrl:a}=e.dataset,s="true"===t.toLowerCase();Object.assign(n.DEFAULTS,{getLinkMetadataEndpointUrl:i,licenseKey:o,getImageDescriptionEndpointUrl:a,isImageRecognitionEnabled:s},r?{contextMacros:JSON.parse(r)}:{}),d=!0}},5445:function(e,t,i){i.d(t,{M:function(){return a}});var n=i(4122),o=i.n(n);i(259),i(3342),i(8858);var r=i(6550);const a=()=>{o().MAIL_REGEX=/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/;const e=n.DEFAULTS.videoInsertButtons||[];delete e[e.indexOf("videoUpload")],(0,r.b)()}},8858:function(e,t,i){i.d(t,{NU:function(){return g},eF:function(){return v},h4:function(){return y},ht:function(){return h}});var n=i(7187),o=i.n(n),r=i(7955),a=i.n(r),s=i(6166),l=i(2920),d=i(3436);const c=/<input [^>]*data-macro-type="(query|pattern)[^>]*>/g,u=/data-macro-value="([^"]*)"/,f=/data-macro-default-value="([^"]*)"/,p=/{%\s*ResolveDynamicText\(\s*"(query|pattern)"\s*,\s*"([^"]+)"\s*,\s*"(.*?)"\s*\)\s*%}/g,g=e=>e.replace(c,((e,t)=>`{% ResolveDynamicText("${t}", "${e.match(u)[1]||""}", "${a()(e.match(f)[1]).replace(/"/g,'\\"')}") %}`)),v=(e,t)=>e.replace(p,((e,i,n,r)=>(0,d.VK)(i,n,o()(r.replace(/\\"/g,'"')),(0,l.t)(t,n)))),y=e=>e.replace(p,""),h=e=>{e.el.querySelectorAll(`.${s.rW}`).forEach((t=>{t.onclick=()=>e.kenticoMacroPlugin.showActionsPopup(t),t.onmousedown=e=>{2===e.button&&e.stopPropagation()}}))}},259:function(e,t,i){i.d(t,{it:function(){return c},rk:function(){return s},sB:function(){return l},tT:function(){return d}});var n=i(6988),o=i(4447),r=i(9868);const a={},s=(e,t)=>{const i=e.querySelectorAll("[data-inline-editor]"),s=(0,n.ko)(r.rv.LocalizationService),l={cultureCode:s.getCultureCode(),getString:s.getLocalizationWithoutPrefix};for(const e of i){const i=e.dataset.inlineEditor,n=a[i];if(!n){const e=s.getLocalization("inlineeditors.notregistered",i);o.k.logError(e);continue}const r=e.dataset.propertyName;if(r&&r.length)try{n.init({editor:e,propertyName:r,localizationService:l,propertyValue:t[r]})}catch(e){o.k.logException(e)}else{const e=s.getLocalization("inlineeditors.missingpropertyname",i);o.k.logError(e)}}},l=e=>{u(e,"dragStart")},d=e=>{u(e,"drop")},c=e=>{u(e,"destroy")},u=(e,t)=>{const i=e.querySelectorAll("[data-inline-editor]");for(const e of i){const i=e.dataset.inlineEditor,n=a[i];if(n.hasOwnProperty(t)){const i=n[t],o={editor:e};i.call(i,o)}}}},209:function(e,t,i){i.d(t,{G3:function(){return f},Uh:function(){return g},YW:function(){return p},Yu:function(){return h},fh:function(){return R},gk:function(){return v},nf:function(){return y}});var n=i(3465),o=i.n(n),r=i(4313),a=i(3583),s=i(9868),l=i(3245),d=i(8262),c=i(8298);const u=[],f=(e,t=[],i=0)=>(n,o,{localizationService:r})=>{m(e);const{title:a,url:s,data:l,theme:f,width:p,maximized:g,showFooter:v,applyButtonText:y,cancelButtonText:h}=w(e,r);u.push({applyCallback:e.applyCallback,cancelCallback:e.cancelCallback||(()=>null)});n((0,new d.A(b).openModalDialog)({componentIdentifier:`CustomDialog${u.length}`,dialogType:c.E.Custom,dialogTitle:a,dialogMarkupUrl:s,dialogTabs:t,activeTabIndex:i,dialogMarkupModel:l,dialogTheme:f,dialogWidth:p,maximized:g,showFooter:v,applyButtonText:y,cancelButtonText:h}))},p=e=>(t,i)=>{const n=i().modalDialogs.dialogs.length-1;t(l.S9(n,e))},g=(e,t=y)=>async(i,n,{logger:o})=>{try{const o=await u[u.length-1].applyCallback(e);if(o&&!1===o.closeDialog)return;const r=n().modalDialogs.dialogs.length-1;i(t(r)),u.pop()}catch(e){o.logException(e)}},v=(e,t=y)=>async(i,n,{logger:o})=>{try{await u[u.length-1].cancelCallback(e)}catch(e){o.logException(e)}finally{const e=n().modalDialogs.dialogs.length-1;i(t(e)),u.pop()}},y=e=>(t,i,{messaging:n})=>{n.postMessage(s.u.CLOSE_MODAL_DIALOG,null,"*"),t(l.nf(e))},h=()=>(e,t)=>{const i=t().modalDialogs.dialogs;return i.length<=0||i[i.length-1].type!==c.E.Custom?null:o()(i[i.length-1].model)},m=e=>{if(!e.url||!e.applyCallback)throw new TypeError("Passed options do not have required properties.");if("function"!=typeof e.applyCallback)throw new TypeError("applyCallback is not an instance of a Function type.");if(e.cancelCallback&&"function"!=typeof e.cancelCallback)throw new TypeError("cancelCallback is not an instance of a Function type.");if("string"!=typeof e.url)throw new TypeError("url is not of the type string.");if(e.title&&"string"!=typeof e.title)throw new TypeError("title is not of the type string.");if(e.theme&&-1===Object.values(s.Q2).indexOf(e.theme))throw new TypeError("theme does not match any of the existing dialog themes.");if(void 0!==e.width&&("string"!=typeof e.width||!e.width.endsWith("px")&&!e.width.endsWith("%")))throw new TypeError("width must be represented by 'XXXpx' or 'XX%' string values.");if(void 0!==e.maximized&&"boolean"!=typeof e.maximized)throw new TypeError("maximized must be of type boolean.");if(void 0!==e.showFooter&&"boolean"!=typeof e.showFooter)throw new TypeError("showFooter must be of type boolean.")},w=(e,t)=>{const i={showFooter:!0,width:"66%",maximized:!1,applyButtonText:t.getLocalization("modaldialog.buttons.apply"),cancelButtonText:t.getLocalization("modaldialog.buttons.cancel")};return a.rq.assignDefined(i,e)},b=e=>({title:e.dialogTitle,markupUrl:e.dialogMarkupUrl,model:e.dialogMarkupModel,theme:e.dialogTheme}),R=(e,t,i)=>async(n,o,{logger:a})=>{try{const o=await(0,r.F)(t,i);n(l.wD(e,o))}catch(e){a.logException(e)}}},6724:function(e,t,i){i.d(t,{M:function(){return l}});var n=i(9123),o=i(1698),r=i(932),a=i(9148),s=i(9511);const l=(e,t,i,l=null,d=null,c=0)=>(u,f)=>{const p=(0,r.o)(i);let g=a.Mi.Center,v=!1,y=0;if([a.kQ.AddSection,a.kQ.AddWidget].includes(t)){const{metadata:s,editableAreasConfiguration:u,widgetZonesConfiguration:p,zones:h,editableAreas:m}=f();v=(0,o.u)(t,s,u[l],p[d]).length+c>5;const w=v?n.R7:n.TL;g=(0,r.b)(i,w),y=t===a.kQ.AddWidget?e!==d?h[d].widgets.indexOf(e):0:m[l].sections.indexOf(e)}u((0,s.Mw)(e,g,t,p,l,d,v,y))}},9686:function(e,t,i){i.d(t,{OB:function(){return g},g8:function(){return c},qD:function(){return v}});var n=i(8661),o=i.n(n),r=i(8721),a=i(6756),s=i(6084),l=i(5331),d=i(4795);const c=async(e,t,i)=>{const n=(0,d.Yn)(t.sections[e].zones,t.zones),o=u(n,t);0!==o.length&&await f(o,t,i)},u=(e,t)=>{const i=e=>t.markups.variants[e].isDirty,n=e.reduce(((e,n)=>{const o=t.widgets[n].type,r=t.widgets[n].variants.filter(i);return 0===r.length?e:void 0===e[o]?Object.assign(Object.assign({},e),{[o]:r}):Object.assign(Object.assign({},e),{[o]:[...e[o],...r]})}),{});return Object.entries(n)},f=async(e,t,i)=>{const n=p(e,t),r=await Promise.all(n),a=o()(e,(([e,t])=>t)).reduce(((e,t,i)=>(e[t]=r[i],e)),{});i((0,l.R)(a))},p=(e,t)=>o()(e,(([e,i])=>{const n=t.metadata.widgets[e].markupUrl;return i.map((e=>{const i=t.widgetVariants[e].properties;return a.hK(n,i)}))})),g=async(e,t,i=null,n=null)=>{const o=e.metadata.sections[t];!0===o.hasProperties&&null===n&&(n=await a._G(o.defaultPropertiesUrl));const l=await a.hK(o.markupUrl,n),d=(0,s.R_)(l),c={identifier:i||(0,r.Z)(),type:t,properties:n,zones:[]},u=(0,s.E8)(d.markup);u.forEach((e=>c.zones.push(e.identifier)));const{markup:f,restrictions:p}=(0,s.l5)(d.markup,c.zones);return{section:c,markup:{markup:f},widgetZones:u,widgetRestrictions:p}},v=(e,t,i,n)=>{const o={source:e.zones.reduce(((e,t)=>(e[t]=n.zones[t].name,e)),{}),target:i.reduce(((e,{identifier:t,name:i})=>(e[t]=i,e)),{})};return(0,d.Np)(y(e.zones,o.source),y(t.zones,o.target),n.zones)},y=(e,t)=>e.map((e=>({identifier:e,name:t[e]})))},3522:function(e,t,i){i.d(t,{Oi:function(){return c},Rw:function(){return f},Tv:function(){return p},WG:function(){return u},qG:function(){return d}});var n=i(5030),o=i.n(n),r=i(4795),a=i(3583),s=i(9954),l=i(9686);const d=(e,t,i)=>async(n,o)=>{const{section:r,markup:a,widgetZones:d,widgetRestrictions:c}=await(0,l.OB)(o(),e);n(s.qG(r,t,i,a,d,c))},c=(e,t)=>async(i,n)=>{const d=n(),c=d.sections[e],u=(0,r.Yn)(c.zones,d.zones),f=Object.values(o()(d.widgets,u));if(1===d.editableAreas[t].sections.length){const{section:n,markup:o,widgetZones:r,widgetRestrictions:u}=await(0,l.OB)(d,d.editableAreasConfiguration[t].defaultSection,e);i(s.WG(c,n,o,a.T.toRecord(r,"identifier"),u,f))}else i(s.Oi(c,t,f))},u=(e,t)=>async(i,n)=>{const o=n(),r=o.sections[e],{section:a,markup:d,widgetZones:c,widgetRestrictions:u}=await(0,l.OB)(o,t);await(0,l.g8)(e,o,i);const f=(0,l.qD)(r,a,c,o);i(s.WG(r,a,d,f,u))},f=(e,t,i,n)=>async(o,r)=>{const a=r();if(await(0,l.g8)(e,a,o),1===a.editableAreas[t].sections.length){const{section:e,markup:i,widgetZones:n,widgetRestrictions:r}=await(0,l.OB)(a,a.editableAreasConfiguration[t].defaultSection);o(s.qG(e,t,0,i,n,r))}o(s.Rw(e,t,i,n))},p=(e,t)=>async(i,n,o)=>{try{const o=n(),r=o.sections[e],{section:a,markup:d,widgetZones:c,widgetRestrictions:u}=await(0,l.OB)(o,r.type,e,t);await(0,l.g8)(e,o,i);const f=(0,l.qD)(r,a,c,o);i(s.WG(r,a,d,f,u))}catch(e){o.logger.logException(e)}}},22:function(e,t,i){i.d(t,{nf:function(){return r.nf},fh:function(){return r.fh},Mw:function(){return n.M},Tv:function(){return a.Tv},xN:function(){return o.xN}});i(6756),i(7699),i(5331);var n=i(6724),o=i(5836),r=i(209),a=i(3522)},9148:function(e,t,i){i.d(t,{Ey:function(){return r.E},Mi:function(){return n},kQ:function(){return o}});var n,o,r=i(8298);!function(e){e.Center="center",e.Left="left",e.Right="right"}(n||(n={})),function(e){e.AddWidget="addWidget",e.AddSection="addSection",e.ChangeSection="changeSection",e.Personalization="personalization"}(o||(o={}))},7581:function(e,t,i){i.d(t,{AK:function(){return d},Gn:function(){return o},JJ:function(){return s},W_:function(){return r},nl:function(){return a},oA:function(){return l}});var n=i(1757);const o=(0,n.createAction)("widgetSelection/SELECT",(e=>({widgetIdentifier:e})))(),r=(0,n.createAction)("widgetSelection/UNSELECT")(),a=(0,n.createAction)("widgetSelection/FREEZE")(),s=(0,n.createAction)("widgetSelection/THAW")(),l=(0,n.createAction)("widgetSelection/DISABLE_CLICK_AWAY")(),d=(0,n.createAction)("widgetSelection/ENABLE_CLICK_AWAY")()},1992:function(e,t,i){var n={};i.r(n);i(7273);var o=i(6988),r=(i(8660),i(5717)),a=i(2043),s=i(9868),l=i(5466),d=i(6631),c=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let f=class extends d.V{constructor(){super("kentico.formbuilder")}};f=c([(0,l.b)(),u("design:paramtypes",[])],f);var p=i(3612);const g=new p.fK.Entity("widgetVariants",{},{idAttribute:"identifier"}),v=new p.fK.Entity("widgets",{variants:[g]},{idAttribute:"identifier"}),y=new p.fK.Entity("zones",{widgets:[v]},{idAttribute:"identifier"}),h=new p.fK.Entity("sections",{zones:[y]},{idAttribute:"identifier"}),m={editableAreas:[new p.fK.Entity("editableAreas",{sections:[h]},{idAttribute:"identifier"})]};var w=i(9351);var b=i(3583),R=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},I=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};let C=class{normalizeConfiguration(e){this.renameZoneConfiguration(e,"formComponents","widgets");const t=(0,p.Fv)(e,m).entities;this.mergePropertiesFromVariantsToComponents(e,t);return b.rq.isEmpty(t)?{editableAreas:{},sections:{},zones:{},widgets:{},widgetVariants:{}}:t}denormalizeConfiguration(e){const t=(0,p.cY)({editableAreas:Object.keys(e.editableAreas)},m,e);return this.renameZoneConfiguration(t,"widgets","formComponents"),this.mergePropertiesFromComponentsToVariants(e,t),t}normalizeMetadata(e){const t=e.formComponents.map((e=>{const{identifier:t}=e,i=I(e,["identifier"]);return Object.assign(Object.assign({},i),{hasEditableProperties:!1,hasProperties:!0,propertiesFormMarkupUrl:null,typeIdentifier:e.identifier})})),i=(0,p.Fv)({sections:e.sections,widgets:t},w.e).entities;return{widgets:i.widgets||{},sections:i.sections||{},pageTemplates:{},personalizationConditionTypes:{}}}renameZoneConfiguration(e,t,i){for(const n of e.editableAreas)for(const e of n.sections)for(const n of e.zones)n[i]=n[t],delete n[t]}mergePropertiesFromComponentsToVariants(e,t){for(const i of t.editableAreas)for(const t of i.sections)for(const i of t.zones)for(const t of i.formComponents)t.properties=e.widgetVariants[t.variants[0].identifier].properties,delete t.variants}mergePropertiesFromVariantsToComponents(e,t){for(const i of e.editableAreas)for(const e of i.sections)for(const i of e.zones)for(const e of i.widgets)t.widgetVariants=t.widgetVariants||{},t.widgetVariants[e.identifier]={identifier:e.identifier,name:e.identifier,properties:e.properties},t.widgets[e.identifier].variants=t.widgets[e.identifier].variants||[],Object.assign(t.widgets[e.identifier].variants,[e.identifier]),delete t.widgets[e.identifier].properties}};C=R([(0,l.b)()],C);var k=i(2903);const E="kenticoFormBuilderFreezeUI",O="kenticoFormBuilderUnfreezeUI",S="kenticoPropertiesStateChanged",P="kenticoValidationRuleStateChanged",j="kenticoFormBuilderCloseExpandedValidationRuleConfiguration",V="kenticoVisibilityConditionStateChanged",A="Kentico.UnknownSection";var T=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};let x=class extends k.V{getSectionElements(e){return e=e.filter((e=>e.typeIdentifier!==A)),this.getWidgetElements(e)}};x=T([(0,l.b)()],x);var _=i(4447),M=i(3395),D=i(6084),W=i(9621);const z=(e,t)=>{document.dispatchEvent(new CustomEvent("kenticoRenderMarkup",{detail:{markup:t,targetElementId:e}}))},L=async e=>{try{return await e()}catch(e){throw _.k.logException(e),e}};var F=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};let N=class extends M.N{async getConfiguration(e){const t=await super.getConfiguration(e),i=(0,o.ko)(s.rv.LocalizationService),n=Object.values(t.markups.sections).some((e=>!e.markup));n&&_.k.logError(i.getLocalization("error.sectionrender"));const r=Object.values(t.sections).some((e=>e.type===A));r&&(0,D.KE)("error.sectionconfig",[]);const a=await(async()=>{const e=W.ey.validationRuleMetadataEndpoint;return L((async()=>(await W.dJ.get(e)).data))})();return Object.assign(Object.assign({},t),{validationRulesMetadata:a})}};N=F([(0,l.b)()],N);const B=new r.W({skipBaseClassChecks:!0});B.bind(s.rv.LocalizationService).to(f),B.bind(s.rv.NormalizerService).to(C),B.bind(s.rv.PageConfigurationService).to(N),B.bind(s.rv.PopUpElementsService).to(x),B.bind(s.rv.MessagingService).to(a.o);var q=i(1906),$=i(538),Z=i(3062),U=i(2817),G=i(7945),Q=i(932),Y=i(9511),H=i(9148),J=i(7972),K=i(9167),X=i(4775),ee=i(3522),te=i(1757);const ie=(0,te.createAction)("expandedValidationRuleIdentifier/EXPAND_VALIDATION_RULE",(e=>({validationRuleIdentifier:e})))(),ne=(0,te.createAction)("newValidationRuleIdentifiers/NEW_VALIDATION_RULE_IDENTIFIER",((e,t)=>({identifierForNewValidationRule:e,widgetVariantIdentifier:t})))(),oe=(0,te.createAction)("newValidationRuleIdentifiers/VALIDATION_RULE_ADDED",((e,t,i)=>({validationRuleIdentifier:e,identifierForNewValidationRule:t,widgetVariantIdentifier:i})))(),re=(0,te.createAction)("refreshPropertiesPanelsNotifier/REFRESH")(),ae=(0,te.createAction)("savingInProgress/SHOW_SAVING_MESSAGE")(),se=(0,te.createAction)("savingInProgress/SHOW_SAVED_MESSAGE")();var le=i(6756),de=i(4637);const ce=[],ue=async(e,t,i)=>{e(ae()),await(async e=>{let t,i;const n=ce[ce.length-1],o=new Promise(((e,n)=>{t=e,i=n}));if(ce.push(o),n)try{await n}catch(e){}try{const i=await e();return t(),i}catch(e){return i(),Promise.reject(e)}finally{ce.splice(0,1)}})((()=>L((async()=>(0,le.zL)(t,i))))),(0,de.postMessage)(s.u.CONFIGURATION_CHANGED,null,"*"),e(se())},fe=(e,t,i)=>async(n,o,r)=>{try{b.Yr.dispatchEvent(E,{}),n(ae()),await ee.qG(e,t,i)(n,o,r);const a=W.ey;await ue(n,o(),a.formIdentifier.toString()),b.Yr.dispatchEvent(O,{})}catch(e){r.logger.logException(e)}},pe=(e,t)=>async(i,n,o)=>{try{b.Yr.dispatchEvent(E,{}),i(ae()),await ee.Oi(e,t)(i,n,o);const r=W.ey;await ue(i,n(),r.formIdentifier.toString()),b.Yr.dispatchEvent(O,{})}catch(e){o.logger.logException(e)}},ge=(e,t)=>async(i,n,o)=>{try{b.Yr.dispatchEvent(E,{}),i(ae()),await ee.WG(e,t)(i,n,o);const r=W.ey;await ue(i,n(),r.formIdentifier.toString()),b.Yr.dispatchEvent(O,{})}catch(e){o.logger.logException(e)}},ve=(e,t,i,n)=>async(o,r,a)=>{try{b.Yr.dispatchEvent(E,{}),o(ae()),await ee.Rw(e,t,i,n)(o,r,a);const s=W.ey;await ue(o,r(),s.formIdentifier.toString()),b.Yr.dispatchEvent(O,{})}catch(e){a.logger.logException(e)}};var ye=i(1953),he=i(5836);const me=(e,t,i)=>async(n,o,r)=>{try{n((0,ye.nl)()),n(ae());const a=await he.w6(e,t,i)(n,o,r),s=W.ey;return await ue(n,o(),s.formIdentifier.toString()),n(re()),n((0,ye.JJ)()),a}catch(e){r.logger.logException(e)}},we=(e,t,i,n)=>async(o,r,a)=>{try{await he.UJ(e,t,i,n)(o,r,a);const s=W.ey;await ue(o,r(),s.formIdentifier.toString()),o(re())}catch(e){a.logger.logException(e)}},be=(e,t)=>async(i,n,o)=>{try{he.tQ(e,t)(i,n,o);const r=W.ey;await ue(i,n(),r.formIdentifier.toString()),i(re())}catch(e){o.logger.logException(e)}},Re=(e,t)=>async(i,n,o)=>{try{await he.kN(e,t)(i,n,o);const r=W.ey;await ue(i,n(),r.formIdentifier.toString()),i(re())}catch(e){o.logger.logException(e)}};var Ie=i(4584);var Ce,ke=(0,G.$)(((e,t)=>({sectionsInArea:e.editableAreas[t.identifier].sections,dragAndDrop:e.dragAndDrop})),(()=>({removeSection:pe,changeSection:ge})))(Ie.Z),Ee=i(8262),Oe=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},Se=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Pe=class extends X.w3{constructor(){super(...arguments),this.changePropertiesIcon=s.Ei.Properties,this.buttonType=s.L$.Properties}onOpenPropertiesDialog(){this.openModalDialog({componentIdentifier:this.identifier,dialogType:H.Ey.SectionProperties,showFooter:!0})}get localizedButtonTooltip(){return this.$_localizationService.getLocalization(this.buttonTooltip)}};Oe([(0,X.fI)({required:!0}),Se("design:type",String)],Pe.prototype,"identifier",void 0),Oe([(0,X.fI)({required:!0}),Se("design:type",String)],Pe.prototype,"buttonTooltip",void 0),Oe([(0,X.fI)({required:!0}),Se("design:type","function"==typeof(Ce=void 0!==H.Ey&&H.Ey)?Ce:Object)],Pe.prototype,"dialogType",void 0),Oe([(0,X.fI)({default:!1}),Se("design:type",Boolean)],Pe.prototype,"isTemplateButton",void 0),Oe([(0,X.fI)(),Se("design:type",Function)],Pe.prototype,"openModalDialog",void 0),Pe=Oe([X.wA],Pe);var je=Pe,Ve=i(1900),Ae=(0,Ve.Z)(je,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("kentico-header-button",{attrs:{"is-template-button":e.isTemplateButton,"button-type":e.buttonType},domProps:{buttonTooltip:e.localizedButtonTooltip,icon:e.changePropertiesIcon},on:{click:e.onOpenPropertiesDialog}})],1)}),[],!1,null,null,null),Te=Ae.exports;const xe=(e,t,i)=>{const{componentIdentifier:n}=e,{metadata:o,sections:r}=t;let a;return a={title:o.sections[r[n].type].name,markupUrl:o.sections[r[n].type].propertiesFormMarkupUrl,model:r[n].properties,theme:s.Q2.Section},Object.assign(Object.assign({},a),{title:i.getLocalization("widgetproperties.header",a.title)})};var _e=(0,G.$)((()=>({})),(()=>({openModalDialog:new Ee.A(xe).openModalDialog})))(Te),Me=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},De=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let We=class extends X.w3{constructor(){super(...arguments),this.buttonType=s.L$.Properties,this.propertiesDialogType=H.Ey.SectionProperties}};Me([(0,X.fI)({required:!0}),De("design:type",String)],We.prototype,"sectionIdentifier",void 0),Me([(0,X.fI)(),De("design:type",Boolean)],We.prototype,"showPropertiesButton",void 0),We=Me([(0,X.wA)({components:{SectionPropertiesButton:_e}})],We);var ze=We,Le=(0,Ve.Z)(ze,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.showPropertiesButton?i("div",{staticClass:"ktc-extra-header-buttons"},[i("SectionPropertiesButton",{attrs:{identifier:e.sectionIdentifier,dialogType:e.propertiesDialogType,"button-type":e.buttonType,buttonTooltip:"section.propertiesButtonTooltip"}})],1):e._e()}),[],!1,null,null,null),Fe=Le.exports;var Ne=(0,G.$)(((e,t)=>{const i=e.sections[t.sectionIdentifier];return{showPropertiesButton:!!i&&e.metadata.sections[i.type].hasProperties}}))(Fe),Be=i(460),qe=i(2858),$e=i(5018),Ze=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},Ue=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ge=class extends X.w3{};Ze([(0,X.fI)({required:!0}),Ue("design:type",String)],Ge.prototype,"widgetTitle",void 0),Ze([(0,X.fI)({required:!0}),Ue("design:type",String)],Ge.prototype,"widgetIdentifier",void 0),Ze([(0,X.fI)(),Ue("design:type",String)],Ge.prototype,"activeItemIdentifier",void 0),Ze([(0,X.fI)(),Ue("design:type",Boolean)],Ge.prototype,"showWidgetHeader",void 0),Ge=Ze([X.wA],Ge);var Qe=Ge,Ye=(0,Ve.Z)(Qe,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("kentico-widget-header",{directives:[{name:"show",rawName:"v-show",value:e.showWidgetHeader,expression:"showWidgetHeader"}],staticClass:"ktc-widget-header--top",domProps:{localizationService:e.$_localizationService,widgetTitle:e.widgetTitle}})}),[],!1,null,"765406aa",null).exports;var He=(0,G.$)(((e,{widgetIdentifier:t})=>{const{widgetVariants:i,displayedWidgetVariants:n,widgetSelection:o,dragAndDrop:r,highlightedWidget:a}=e,s=i[n[t]];return{showWidgetHeader:(a===t||o.identifier===t)&&r.entity!==$e.p.Widget,activeItemIdentifier:s?s.identifier:null}}))(Ye),Je=i(6724),Ke=i(7142);var Xe=(0,G.$)(((e,t)=>{const{dragAndDrop:i,widgets:n,popup:o,zones:r,sections:a}=e,{sectionIdentifier:s,zoneIndex:l}=t,d=a[s]?a[s].zones[l]:"";return{zoneIdentifier:d,dragAndDrop:i,zone:r[d],popup:o,widgetsInZone:r[d]?r[d].widgets.map((e=>n[e])):[]}}),(()=>({removeWidget:be,closePopup:ye.j4,openPopup:(e,t,i=null,n=null,o=0)=>(0,Je.M)(e,H.kQ.AddWidget,t,i,n,o)})))(Ke.Z),et=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};let tt=class extends qe.H{};tt=et([(0,X.wA)({components:{WidgetZone:Xe,WidgetHeader:He}})],tt);var it=tt,nt=(0,Ve.Z)(it,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("WidgetZone",{attrs:{sectionIdentifier:e.sectionIdentifier,zoneIndex:e.zoneIndex,areaIdentifier:e.areaIdentifier},scopedSlots:e._u([{key:"widgetHeader",fn:function(e){var t=e.widgetTitle,n=e.widgetIdentifier;return[i("WidgetHeader",{attrs:{widgetTitle:t,widgetIdentifier:n}})]}}])})}),[],!1,null,null,null),ot=nt.exports,rt=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};let at=class extends((0,X.Wr)(Be.r)){created(){this.widgetZone=ot}};at=rt([X.wA],at);var st=at,lt=(0,Ve.Z)(st,undefined,undefined,!1,null,null,null).exports,dt=i(6562),ct=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},ut=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let ft=class extends X.w3{};ct([(0,X.fI)({required:!0}),ut("design:type",String)],ft.prototype,"identifier",void 0),ft=ct([(0,X.wA)({components:{EditableArea:ke,SectionMarkup:lt,SectionHeaderExtraButtons:Ne,SectionDivider:dt.Z}})],ft);var pt,gt=ft,vt=(0,Ve.Z)(gt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("EditableArea",{attrs:{identifier:e.identifier},scopedSlots:e._u([{key:"sectionMarkup",fn:function(t){var n=t.sectionMarkup,o=t.sectionIdentifier;return[i("SectionMarkup",{attrs:{sectionMarkup:n,sectionIdentifier:o,areaIdentifier:e.identifier}})]}},{key:"sectionHeaderExtraButtons",fn:function(e){var t=e.sectionIdentifier;return i("SectionHeaderExtraButtons",{attrs:{sectionIdentifier:t}})}},{key:"sectionDivider",fn:function(e){var t=e.sectionIdentifier,n=e.areaIdentifier;return i("SectionDivider",{attrs:{sectionIdentifier:t,areaIdentifier:n}})}}])})}),[],!1,null,null,null),yt=vt.exports,ht=i(8721),mt=i(7110),wt=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},bt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Rt=class extends X.w3{constructor(){super(...arguments),this.validationRulesWithMetadata=[],this.validationRuleInstanceIdentifier="",this.renderRuleMarkupId="",this.model=null}created(){this.validationRuleInstanceIdentifier=this.editedValidationRuleConfiguration?this.editedValidationRuleConfiguration.validationRule.instanceIdentifier:this.newValidationRuleIdentifiers.filter((e=>e.widgetVariantIdentifier===this.widgetVariantIdentifier))[0].validationRuleIdentifier,this.renderRuleMarkupId=`jqueryLoaded-validationRuleConfigurationForm-${this.validationRuleInstanceIdentifier}`,this.validationRulesWithMetadata=this.validationRulesMetadata.map((e=>({metadata:e,validationRule:this.editedValidationRuleConfiguration&&b.kA.equalsIgnoreCase(this.editedValidationRuleConfiguration.identifier,e.identifier)?Object.assign({},this.editedValidationRuleConfiguration.validationRule):{instanceIdentifier:this.validationRuleInstanceIdentifier}}))),null!==this.editedValidationRuleConfiguration?this.model=this.validationRulesWithMetadata.filter((e=>b.kA.equalsIgnoreCase(e.metadata.identifier,this.editedValidationRuleConfiguration.identifier)))[0]:this.validationRulesMetadata.length>0&&(this.model=this.validationRulesWithMetadata[0])}valueInSelectorChanged(){(async(e,t,i,n)=>{const o=W.ey.validationRuleMarkupEndpoint,r={formComponentInstanceIdentifier:e,formFieldName:n,validationRule:JSON.stringify(i),validationRuleIdentifier:t};return L((async()=>(await W.dJ.post(o,r)).data))})(this.widgetVariantIdentifier,this.model.metadata.identifier,this.model.validationRule,this.formFieldName).then((e=>{z(this.renderRuleMarkupId,e)}))}};wt([(0,X.fI)({default:[]}),bt("design:type",Array)],Rt.prototype,"validationRulesMetadata",void 0),wt([(0,X.fI)({default:null}),bt("design:type","function"==typeof(pt=void 0!==n.ValidationRuleConfiguration&&n.ValidationRuleConfiguration)?pt:Object)],Rt.prototype,"editedValidationRuleConfiguration",void 0),wt([(0,X.fI)({required:!0}),bt("design:type",String)],Rt.prototype,"widgetVariantIdentifier",void 0),wt([(0,X.fI)({required:!0}),bt("design:type",String)],Rt.prototype,"formFieldName",void 0),wt([(0,X.fI)(),bt("design:type",Array)],Rt.prototype,"newValidationRuleIdentifiers",void 0),wt([(0,X.fI)(),bt("design:type",Boolean)],Rt.prototype,"refreshPropertiesPanelsNotifier",void 0),wt([(0,X.RL)("model"),(0,X.RL)("refreshPropertiesPanelsNotifier"),bt("design:type",Function),bt("design:paramtypes",[]),bt("design:returntype",void 0)],Rt.prototype,"valueInSelectorChanged",null),Rt=wt([X.wA],Rt);var It=Rt,Ct=(0,Ve.Z)(It,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ktc-rule-row ktc-edit-rule-row"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"ktc-form-control",on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.model=t.target.multiple?i:i[0]}}},e._l(e.validationRulesWithMetadata,(function(t){return i("option",{key:t.metadata.identifier,domProps:{value:t}},[e._v("\n    "+e._s(t.metadata.name)+"\n    ")])})),0),e._v(" "),i("span",{staticClass:"ktc-rule-description"},[e._v(e._s(e.model.metadata.description))]),e._v(" "),i("div",{attrs:{id:e.renderRuleMarkupId}})])}),[],!1,null,null,null),kt=Ct.exports;var Et,Ot=(0,G.$)((e=>({refreshPropertiesPanelsNotifier:e.refreshPropertiesPanelsNotifier})))(kt),St=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},Pt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let jt=class extends X.w3{constructor(){super(...arguments),this.removeRuleLabel=(0,o.ko)(s.rv.LocalizationService).getLocalization("propertiespanel.validationtab.removerule")}expandContent(){this.$emit("expandRule",this.validationRuleConfiguration.validationRule.instanceIdentifier)}remove(){this.$emit("removeRule",this.validationRuleConfiguration.validationRule.instanceIdentifier)}};St([(0,X.fI)({required:!0}),Pt("design:type",String)],jt.prototype,"formFieldName",void 0),St([(0,X.fI)({default:!1}),Pt("design:type",Boolean)],jt.prototype,"isExpanded",void 0),St([(0,X.fI)({required:!0}),Pt("design:type",String)],jt.prototype,"widgetVariantIdentifier",void 0),St([(0,X.fI)({required:!0}),Pt("design:type","function"==typeof(Et=void 0!==n.ValidationRuleConfiguration&&n.ValidationRuleConfiguration)?Et:Object)],jt.prototype,"validationRuleConfiguration",void 0),St([(0,X.fI)({default:[]}),Pt("design:type",Array)],jt.prototype,"validationRulesMetadata",void 0),jt=St([(0,X.wA)({components:{ValidationRuleConfigurationForm:Ot}})],jt);var Vt=jt,At=(0,Ve.Z)(Vt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isExpanded,expression:"!isExpanded"}],staticClass:"ktc-rule-row"},[i("span",{staticClass:"ktc-rule-expandable-title",on:{click:e.expandContent}},[e._v(e._s(e.validationRuleConfiguration.validationRule.title))]),e._v(" "),i("div",{staticClass:"ktc-rule-actions"},[i("button",{staticClass:"ktc-remove-rule ktc-icon-only ktc-btn-icon ktc-btn",attrs:{type:"button",title:e.removeRuleLabel},on:{click:e.remove}},[i("i",{staticClass:"icon-bin",attrs:{"aria-hidden":"true"}}),e._v(" "),i("span",{staticClass:"ktc-sr-only"},[e._v(e._s(e.removeRuleLabel))])])])]),e._v(" "),e.isExpanded?i("ValidationRuleConfigurationForm",{attrs:{editedValidationRuleConfiguration:e.validationRuleConfiguration,validationRulesMetadata:e.validationRulesMetadata,widgetVariantIdentifier:e.widgetVariantIdentifier,formFieldName:e.formFieldName}}):e._e()],1)}),[],!1,null,null,null),Tt=At.exports,xt=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},_t=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Mt=class extends X.w3{constructor(){super(...arguments),this.localizationService=(0,o.ko)(s.rv.LocalizationService)}created(){this.createNewValidationRuleIdentifier((0,ht.Z)(),this.widgetVariantIdentifier)}newRuleExpand(){this.expandValidationRule(this.getWidgetVariantToNewValidationRuleBinding().validationRuleIdentifier)}expandRule(e){this.expandValidationRule(e)}async removeRule(e){await(0,mt.i)(this.localizationService.getLocalization("propertiespanel.validationtab.confirmationmessage.removevalidationrule"))&&this.$emit("removeValidationRule",e,this.widgetVariantIdentifier)}get isNewRuleExpanded(){const e=this.getWidgetVariantToNewValidationRuleBinding();return e&&this.expandedValidationRuleIdentifier===e.validationRuleIdentifier}getWidgetVariantToNewValidationRuleBinding(){return this.newValidationRuleIdentifiers.filter((e=>e.widgetVariantIdentifier===this.widgetVariantIdentifier))[0]}};xt([(0,X.fI)({default:[]}),_t("design:type",Array)],Mt.prototype,"validationRuleConfigurations",void 0),xt([(0,X.fI)({required:!0}),_t("design:type",String)],Mt.prototype,"formFieldName",void 0),xt([(0,X.fI)({required:!0}),_t("design:type",String)],Mt.prototype,"widgetVariantIdentifier",void 0),xt([(0,X.fI)({default:[]}),_t("design:type",Array)],Mt.prototype,"validationRulesMetadata",void 0),xt([(0,X.fI)({default:""}),_t("design:type",String)],Mt.prototype,"expandedValidationRuleIdentifier",void 0),xt([(0,X.fI)(),_t("design:type",Array)],Mt.prototype,"newValidationRuleIdentifiers",void 0),xt([(0,X.fI)(),_t("design:type",Object)],Mt.prototype,"expandValidationRule",void 0),xt([(0,X.fI)(),_t("design:type",Object)],Mt.prototype,"createNewValidationRuleIdentifier",void 0),xt([(0,X.fI)(),_t("design:type",Object)],Mt.prototype,"freezeWidgetSelection",void 0),Mt=xt([(0,X.wA)({components:{ValidationRule:Tt,ValidationRuleConfigurationForm:Ot}})],Mt);var Dt=Mt,Wt=(0,Ve.Z)(Dt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"ktc-rule-designer-rules"},[e._l(e.validationRuleConfigurations,(function(t){return i("ValidationRule",{key:t.validationRule.instanceIdentifier,attrs:{formFieldName:e.formFieldName,isExpanded:t.validationRule.instanceIdentifier===e.expandedValidationRuleIdentifier,validationRuleConfiguration:t,validationRulesMetadata:e.validationRulesMetadata,widgetVariantIdentifier:e.widgetVariantIdentifier},on:{expandRule:e.expandRule,removeRule:e.removeRule}})})),e._v(" "),e.isNewRuleExpanded?i("ValidationRuleConfigurationForm",{attrs:{validationRulesMetadata:e.validationRulesMetadata,formFieldName:e.formFieldName,widgetVariantIdentifier:e.widgetVariantIdentifier,newValidationRuleIdentifiers:e.newValidationRuleIdentifiers}}):e._e()],2),e._v(" "),e.validationRulesMetadata.length?i("button",{staticClass:"ktc-btn ktc-btn-default",on:{click:e.newRuleExpand}},[e._v(e._s(this.localizationService.getLocalization("propertiespanel.validationtab.addvalidationrule")))]):e._e(),e._v(" "),e.validationRulesMetadata.length?e._e():i("div",{staticClass:"ktc-alert ktc-alert-info"},[e._m(0),e._v(" "),i("div",{staticClass:"ktc-alert-label"},[e._v("\r\n        "+e._s(this.localizationService.getLocalization("propertiespanel.validationtab.novalidationrules"))+"\r\n    ")])])])}),[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"ktc-alert-icon"},[i("i",{staticClass:"icon-i-circle"}),e._v(" "),i("span",{staticClass:"ktc-sr-only"},[e._v("Info")])])}],!1,null,null,null),zt=Wt.exports;var Lt=(0,G.$)((e=>({expandedValidationRuleIdentifier:e.expandedValidationRuleIdentifier,newValidationRuleIdentifiers:e.newValidationRuleIdentifiers})),(()=>({expandValidationRule:ie,createNewValidationRuleIdentifier:ne,freezeWidgetSelection:ye.nl})))(zt),Ft=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},Nt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Bt=class extends X.w3{constructor(){super(...arguments),this.tabs=null}created(){this.tabs=this.$children}selectTab(e){this.tabs.forEach((t=>{t.identifier===e.identifier?(this.onTabChange&&this.onTabChange(e),t.isActive=!0):t.isActive=!1}))}};Ft([(0,X.fI)(),Nt("design:type",Object)],Bt.prototype,"onTabChange",void 0),Bt=Ft([X.wA],Bt);var qt=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};let $t=class extends((0,X.Wr)(Bt)){};$t=qt([X.wA],$t);var Zt=$t,Ut=(0,Ve.Z)(Zt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"ktc-btn-group"},e._l(e.tabs,(function(t){return i("button",{key:t.identifier,staticClass:"ktc-btn ktc-btn-default",class:{"ktc-active":t.isActive},attrs:{type:"button"},on:{click:function(i){return e.selectTab(t)}}},[e._v("\n          "+e._s(t.getLocalizedString())+"\n      ")])})),0),e._v(" "),i("div",{staticClass:"ktc-tabs-details"},[e._t("default")],2)])}),[],!1,null,null,null),Gt=Ut.exports,Qt=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},Yt=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ht=class extends X.w3{constructor(){super(...arguments),this.isActive=!1}mounted(){this.isActive=this.selected}getLocalizedString(){return(0,o.ko)(s.rv.LocalizationService).getLocalization(this.name)}};Qt([(0,X.fI)({required:!0}),Yt("design:type",String)],Ht.prototype,"identifier",void 0),Qt([(0,X.fI)({required:!0}),Yt("design:type",String)],Ht.prototype,"name",void 0),Qt([(0,X.fI)({default:!1}),Yt("design:type",Boolean)],Ht.prototype,"selected",void 0),Ht=Qt([X.wA],Ht);var Jt=Ht,Kt=(0,Ve.Z)(Jt,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[e._t("default")],2)}),[],!1,null,null,null).exports,Xt=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},ei=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let ti=class extends X.w3{constructor(){super(...arguments),this.renderConditionMarkupId="",this.tabAlwaysIdentifier="always",this.neverVisibleVisibilityCondition="Kentico.NeverVisible"}created(){this.renderConditionMarkupId=`jqueryLoaded-visibilityCondition-${this.widgetVariantIdentifier}`}mounted(){this.refreshMarkup()}onTabChange(e){let t=null;if(e.identifier===this.tabAlwaysIdentifier)t={detail:{identifier:this.widgetVariantIdentifier,visibilityConditionConfiguration:null}};else{if(e.identifier!==this.neverVisibleVisibilityCondition)return void this.$nextTick(this.refreshMarkup);t={detail:{identifier:this.widgetVariantIdentifier,visibilityConditionConfiguration:{identifier:this.neverVisibleVisibilityCondition,visibilityCondition:{}}}}}document.dispatchEvent(new CustomEvent(V,t))}async refreshMarkup(){if(this.$refs.conditionTab.isActive){const e=await(async(e,t)=>{const i=W.ey.visibilityConditionMarkupEndpoint,n={formComponentInstanceIdentifier:e,formFieldName:t};return L((async()=>(await W.dJ.post(i,n)).data))})(this.widgetVariantIdentifier,this.formFieldName);z(this.renderConditionMarkupId,e)}}};Xt([(0,X.fI)({required:!0}),ei("design:type",String)],ti.prototype,"widgetVariantIdentifier",void 0),Xt([(0,X.fI)({required:!0}),ei("design:type",Object)],ti.prototype,"visibilityConditionConfiguration",void 0),Xt([(0,X.fI)({required:!0}),ei("design:type",String)],ti.prototype,"formFieldName",void 0),Xt([(0,X.fI)(),ei("design:type",Boolean)],ti.prototype,"refreshPropertiesPanelsNotifier",void 0),Xt([(0,X.RL)("refreshPropertiesPanelsNotifier"),ei("design:type",Function),ei("design:paramtypes",[]),ei("design:returntype",Promise)],ti.prototype,"refreshMarkup",null),ti=Xt([(0,X.wA)({components:{Tab:Kt,ButtonGroupSelector:Gt,VisibilityConditionEditorForm:ti}})],ti);var ii=ti,ni=(0,Ve.Z)(ii,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ktc-form-builder-visibility-section"},[i("ButtonGroupSelector",{attrs:{onTabChange:e.onTabChange}},[i("Tab",{attrs:{identifier:e.tabAlwaysIdentifier,name:"propertiespanel.visibilityconditions.tab.always",selected:null==e.visibilityConditionConfiguration}}),e._v(" "),i("Tab",{attrs:{identifier:e.neverVisibleVisibilityCondition,name:"propertiespanel.visibilityconditions.tab.never",selected:e.visibilityConditionConfiguration&&e.visibilityConditionConfiguration.identifier==e.neverVisibleVisibilityCondition}}),e._v(" "),i("Tab",{ref:"conditionTab",attrs:{identifier:"condition",name:"propertiespanel.visibilityconditions.tab.condition",selected:e.visibilityConditionConfiguration&&e.visibilityConditionConfiguration.identifier!=e.neverVisibleVisibilityCondition}},[i("div",{attrs:{id:e.renderConditionMarkupId}})])],1)],1)}),[],!1,null,null,null),oi=ni.exports;var ri=(0,G.$)((e=>({refreshPropertiesPanelsNotifier:e.refreshPropertiesPanelsNotifier})))(oi),ai=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a};let si=class extends((0,X.Wr)(Bt)){};si=ai([X.wA],si);var li=si,di=(0,Ve.Z)(li,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ktc-form-builder-tabs"},[i("div",{staticClass:"ktc-form-builder-tabs-nav"},e._l(e.tabs,(function(t){return i("a",{key:t.identifier,staticClass:"ktc-form-builder-tab-link",class:{"ktc-active":t.isActive},on:{click:function(i){return e.selectTab(t)}}},[e._v("\n          "+e._s(t.getLocalizedString())+"\n      ")])})),0),e._v(" "),i("div",{staticClass:"ktc-form-builder-tab-content"},[i("div",{staticClass:"ktc-form-builder-tab-content-container"},[e._t("default")],2)])])}),[],!1,null,null,null),ci=di.exports,ui=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},fi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let pi=class extends X.w3{get propertiesTabIdentifier(){return`jqueryLoaded-propertiesTab-${this.widgetProperties.guid}`}get validationTabIdentifier(){return`jqueryLoaded-validationTab-${this.widgetProperties.guid}`}mounted(){this.renderPropertiesEditor()}renderPropertiesEditor(){(async e=>{const t=W.ey.propertiesEditorEndpoint;return L((async()=>(await W.dJ.post(t,e)).data))})({identifier:this.widgetIdentifier,type:this.widgetType,properties:this.widgetProperties}).then((e=>{z(this.propertiesTabIdentifier,e),this.$emit("contentLoaded",{identifier:this.widgetIdentifier})}))}removeValidationRule(e,t){this.$emit("removeValidationRule",e,t)}};ui([(0,X.fI)({required:!0}),fi("design:type",String)],pi.prototype,"widgetIdentifier",void 0),ui([(0,X.fI)({required:!0}),fi("design:type",String)],pi.prototype,"widgetType",void 0),ui([(0,X.fI)({required:!0}),fi("design:type",Object)],pi.prototype,"widgetProperties",void 0),ui([(0,X.fI)({default:()=>[]}),fi("design:type",Array)],pi.prototype,"validationRulesMetadata",void 0),ui([(0,X.fI)(),fi("design:type",Boolean)],pi.prototype,"refreshPropertiesPanelsNotifier",void 0),ui([(0,X.RL)("refreshPropertiesPanelsNotifier"),fi("design:type",Function),fi("design:paramtypes",[]),fi("design:returntype",void 0)],pi.prototype,"renderPropertiesEditor",null),pi=ui([(0,X.wA)({components:{ValidationRules:Lt,Tab:Kt,Tabs:ci,VisibilityConditionEditorForm:ri}})],pi);var gi=pi,vi=(0,Ve.Z)(gi,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Tabs",[i("Tab",{attrs:{identifier:"propertiesTab",name:"propertiespanel.propertiestab.name",selected:!0}},[i("div",{attrs:{id:e.propertiesTabIdentifier}})]),e._v(" "),i("Tab",{attrs:{identifier:"validationTab",name:"propertiespanel.validationtab.name",selected:!1}},[i("div",{staticClass:"ktc-form-builder-tab-content-inner"},[i("div",{staticStyle:{display:"block"},attrs:{id:"form-builder-validation"}},[i("div",{staticClass:"ktc-label-property ktc-Top"},[i("span",{staticClass:"ktc-control-label"},[e._v(e._s(this.$_localizationService.getLocalization("propertiespanel.validationtab.rules")))])]),e._v(" "),i("div",{staticClass:"ktc-field-property"},[i("span",{staticClass:"ktc-field-rule-designer"},[i("ValidationRules",{attrs:{validationRuleConfigurations:e.widgetProperties.validationRuleConfigurations,validationRulesMetadata:e.validationRulesMetadata,formFieldName:e.widgetProperties.name,widgetVariantIdentifier:e.widgetProperties.guid},on:{removeValidationRule:e.removeValidationRule}})],1)])]),e._v(" "),i("div",{attrs:{id:e.validationTabIdentifier}})])]),e._v(" "),i("Tab",{attrs:{identifier:"visibilityTab",name:"propertiespanel.visibilitytab.name"}},[i("VisibilityConditionEditorForm",{staticClass:"ktc-form-builder-tab-content-inner",attrs:{formFieldName:e.widgetProperties.name,widgetVariantIdentifier:e.widgetProperties.guid,visibilityConditionConfiguration:e.widgetProperties.visibilityConditionConfiguration}})],1)],1)}),[],!1,null,null,null),yi=vi.exports;var hi,mi,wi,bi,Ri=(0,G.$)((e=>({refreshPropertiesPanelsNotifier:e.refreshPropertiesPanelsNotifier})))(yi),Ii=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},Ci=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let ki=class extends X.w3{constructor(){super(...arguments),this.requestedWidgetIdentifier=null,this.displayedWidgetIdentifier=null,this.markupsLoaded=[]}get wigdetsWithRequestedOrLoadedPropertiesMarkup(){return Object.values(this.widgets).filter((e=>e.identifier===this.requestedWidgetIdentifier||this.markupsLoaded[e.identifier]))}mounted(){document.addEventListener(E,this.freezeWidgetSelectionEventCallback),document.addEventListener(S,this.propertiesStateChangedEventCallback),document.addEventListener(P,this.validationRuleStateChangedEventCallback),document.addEventListener(O,this.thawWidgetSelectionEventCallback),document.addEventListener(j,this.closeValidationRule),document.addEventListener(V,this.visibilityConditionChangedEventCallback)}beforeDestroy(){document.removeEventListener(E,this.freezeWidgetSelectionEventCallback),document.removeEventListener(S,this.propertiesStateChangedEventCallback),document.removeEventListener(P,this.validationRuleStateChangedEventCallback),document.removeEventListener(O,this.thawWidgetSelectionEventCallback),document.removeEventListener(j,this.closeValidationRule),document.removeEventListener(V,this.visibilityConditionChangedEventCallback)}onMouseDown(){this.disableWidgetClickAway()}freezeWidgetSelectionEventCallback(){this.freezeWidgetSelection()}async propertiesStateChangedEventCallback(e){const t=this.getWidgetVariant(e.detail.identifier),i=this.getWidget(t.identifier),n=Object.assign(Object.assign({},t.properties),e.detail.properties);await this.setWidgetProperties(i.identifier,n),this.thawWidgetSelection()}async visibilityConditionChangedEventCallback(e){const t=e.detail.identifier,i=e.detail.visibilityConditionConfiguration,n=this.getWidgetVariant(t),o=this.getWidget(n.identifier),r=Object.assign({},n.properties);r.visibilityConditionConfiguration=i;const a=Object.assign({},r);await this.setWidgetProperties(o.identifier,a),this.thawWidgetSelection()}async validationRuleStateChangedEventCallback(e){const t=e.detail.identifier,i=e.detail.validationRuleConfiguration,n=i.validationRule,o=this.getWidgetVariant(t),r=this.getWidget(o.identifier),a=Object.assign({},o.properties),s=a.validationRuleConfigurations;let l=s.filter((e=>e.validationRule.instanceIdentifier===n.instanceIdentifier))[0],d=null;l?(l=Object.assign(Object.assign({},l),i),d=[...s.map((e=>e.validationRule.instanceIdentifier!==l.validationRule.instanceIdentifier?e:l))],this.closeValidationRule()):(d=[...s,i],this.newValidationRuleAdded(i.validationRule.instanceIdentifier,(0,ht.Z)(),t)),a.validationRuleConfigurations=d;const c=Object.assign({},a);await this.setWidgetProperties(r.identifier,c),this.thawWidgetSelection()}async removeValidationRule(e,t){const i=this.getWidgetVariant(t),n=this.getWidget(i.identifier),o=Object.assign({},i.properties),r=o.validationRuleConfigurations.filter((t=>t.validationRule.instanceIdentifier!==e));o.validationRuleConfigurations=r;const a=Object.assign({},o);await this.setWidgetProperties(n.identifier,a)}closeValidationRule(){this.expandValidationRule(null)}getWidgetVariant(e){return Object.values(this.widgetVariants).filter((t=>t.properties.guid===e))[0]}getWidget(e){return Object.values(this.widgets).filter((t=>t.variants[0]===e))[0]}thawWidgetSelectionEventCallback(){this.thawWidgetSelection()}getWidgetProperties(e){return this.widgetVariants[e.variants[0]].properties}getCompatibleValidationRulesMetadata(e){const t=this.widgetMetadata[e.type];return this.validationRulesMetadataPerType[t.valueType]}propertiesEditorFormContentLoaded(e){this.markupsLoaded[e.identifier]=!0,this.requestedWidgetIdentifier===e.identifier&&(this.displayedWidgetIdentifier=e.identifier)}loadPropertiesEditor(){if(this.savingInProgress)return;const e=this.widgets[this.widgetSelection.identifier];e&&"Kentico.Invalid"!==e.type?(this.requestedWidgetIdentifier=this.widgetSelection.identifier,this.markupsLoaded[this.requestedWidgetIdentifier]&&(this.displayedWidgetIdentifier=this.requestedWidgetIdentifier),this.widgetSelection.identifier||(this.displayedWidgetIdentifier=null)):this.displayedWidgetIdentifier=null}};Ii([(0,X.fI)(),Ci("design:type","function"==typeof(hi=void 0!==U&&U.Entities)?hi:Object)],ki.prototype,"widgetVariants",void 0),Ii([(0,X.fI)(),Ci("design:type","function"==typeof(mi=void 0!==U&&U.Entities)?mi:Object)],ki.prototype,"widgets",void 0),Ii([(0,X.fI)(),Ci("design:type","function"==typeof(wi=void 0!==U&&U.WidgetSelection)?wi:Object)],ki.prototype,"widgetSelection",void 0),Ii([(0,X.fI)(),Ci("design:type",Object)],ki.prototype,"validationRulesMetadataPerType",void 0),Ii([(0,X.fI)(),Ci("design:type","function"==typeof(bi=void 0!==U&&U.Entities)?bi:Object)],ki.prototype,"widgetMetadata",void 0),Ii([(0,X.fI)(),Ci("design:type",Boolean)],ki.prototype,"savingInProgress",void 0),Ii([(0,X.fI)(),Ci("design:type",Object)],ki.prototype,"freezeWidgetSelection",void 0),Ii([(0,X.fI)(),Ci("design:type",Object)],ki.prototype,"setWidgetProperties",void 0),Ii([(0,X.fI)(),Ci("design:type",Object)],ki.prototype,"thawWidgetSelection",void 0),Ii([(0,X.fI)(),Ci("design:type",Object)],ki.prototype,"newValidationRuleAdded",void 0),Ii([(0,X.fI)(),Ci("design:type",Object)],ki.prototype,"expandValidationRule",void 0),Ii([(0,X.fI)(),Ci("design:type",Object)],ki.prototype,"disableWidgetClickAway",void 0),Ii([(0,X.RL)("widgetSelection.identifier"),(0,X.RL)("savingInProgress"),Ci("design:type",Function),Ci("design:paramtypes",[]),Ci("design:returntype",void 0)],ki.prototype,"loadPropertiesEditor",null),ki=Ii([(0,X.wA)({components:{PropertiesEditorForm:Ri}})],ki);var Ei=ki,Oi=(0,Ve.Z)(Ei,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ktc-form-builder-properties-panel"},[e._l(e.wigdetsWithRequestedOrLoadedPropertiesMarkup,(function(t){return i("PropertiesEditorForm",{directives:[{name:"show",rawName:"v-show",value:t.identifier===e.displayedWidgetIdentifier&&e.markupsLoaded[t.identifier],expression:"widget.identifier === displayedWidgetIdentifier && markupsLoaded[widget.identifier]"}],key:t.identifier,attrs:{widgetIdentifier:t.identifier,widgetType:t.type,widgetProperties:e.getWidgetProperties(t),validationRulesMetadata:e.getCompatibleValidationRulesMetadata(t)},on:{contentLoaded:e.propertiesEditorFormContentLoaded,removeValidationRule:e.removeValidationRule},nativeOn:{mousedown:function(t){return e.onMouseDown.apply(null,arguments)}}})})),e._v(" "),e.displayedWidgetIdentifier?e._e():e._t("default")],2)}),[],!1,null,null,null),Si=Oi.exports;var Pi=(0,G.$)((e=>({validationRulesMetadataPerType:e.validationRulesMetadata,widgetMetadata:e.metadata.widgets,widgetVariants:e.widgetVariants,widgets:e.widgets,widgetSelection:e.widgetSelection,savingInProgress:e.savingInProgress})),(()=>({expandValidationRule:ie,freezeWidgetSelection:ye.nl,newValidationRuleAdded:oe,setWidgetProperties:Re,thawWidgetSelection:ye.JJ,disableWidgetClickAway:ye.oA})))(Si),ji=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},Vi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ai=class extends X.w3{constructor(){super(...arguments),this.timeoutID=null,this.showMessage=!1,this.savingInProgress=null}onSave(e){this.showMessage=!0,e?e&&this.timeoutID&&(window.clearTimeout(this.timeoutID),this.timeoutID=null):this.timeoutID=window.setTimeout((()=>{this.showMessage=!1}),this.fadeOutDuration)}};ji([(0,X.fI)(),Vi("design:type",Boolean)],Ai.prototype,"savingInProgress",void 0),ji([(0,X.fI)({default:2e3}),Vi("design:type",Number)],Ai.prototype,"fadeOutDuration",void 0),ji([(0,X.RL)("savingInProgress"),Vi("design:type",Function),Vi("design:paramtypes",[Boolean]),Vi("design:returntype",void 0)],Ai.prototype,"onSave",null),Ai=ji([X.wA],Ai);var Ti=Ai,xi=(0,Ve.Z)(Ti,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:e.showMessage,expression:"showMessage"}]},[e.savingInProgress?e._t("saving"):e._e(),e._v(" "),e.savingInProgress?e._e():e._t("saved")],2)}),[],!1,null,null,null).exports;var _i=(0,G.$)((e=>({savingInProgress:e.savingInProgress})))(xi),Mi=i(6669);class Di extends Mi.R{constructor(e,t,i,n,o,r,a,s,l,d,c,u){super(a,s,l,d,c,u,null),this.formIdentifier=e,this.propertiesEditorEndpoint=t,this.validationRuleMetadataEndpoint=i,this.validationRuleMarkupEndpoint=n,this.visibilityConditionMarkupEndpoint=o,this.saveMessageClientId=r}validate(){if(0===this.formIdentifier)throw new Error((0,o.ko)(s.rv.LocalizationService).getLocalization("notinitialized"))}getComponentMarkupData(e){return{postedData:e,formIdentifier:this.formIdentifier}}}var Wi=i(4791),zi=i(3894),Li=i(989),Fi=i(5133),Ni=i(3788),Bi=i(7847),qi=i(2031);const $i=(0,Wi.UY)(Object.assign(Object.assign({},qi.E),{config:(e=null)=>e,expandedValidationRuleIdentifier:(e=null,t)=>{switch(t.type){case(0,te.getType)(ie):return t.payload.validationRuleIdentifier;case(0,te.getType)(oe):return null;default:return e}},newValidationRuleIdentifiers:(e=[],t)=>{switch(t.type){case(0,te.getType)(ne):return[...e.filter((e=>e.widgetVariantIdentifier!==t.payload.widgetVariantIdentifier)),{validationRuleIdentifier:t.payload.identifierForNewValidationRule,widgetVariantIdentifier:t.payload.widgetVariantIdentifier}];case(0,te.getType)(oe):return[...e.filter((e=>e.validationRuleIdentifier!==t.payload.validationRuleIdentifier)),{validationRuleIdentifier:t.payload.identifierForNewValidationRule,widgetVariantIdentifier:t.payload.widgetVariantIdentifier}];default:return e}},refreshPropertiesPanelsNotifier:(e=null,t)=>t.type===(0,te.getType)(re)?!e:e,savingInProgress:(e=null,t)=>{switch(t.type){case(0,te.getType)(ae):return!0;case(0,te.getType)(se):return!1;default:return e}},validationRulesMetadata:(e={})=>e})),Zi=(e,t)=>{const i=(0,Fi.f)(t);return(0,Wi.MT)($i,e,i((0,Wi.md)(zi.Z.withExtraArgument((0,Li.R)()),Bi.D,Ni.r)))};var Ui=i(6052),Gi=i(1660);var Qi,Yi=(0,G.$)((({modalDialogs:e,popup:t})=>({modalDialogs:e.dialogs.filter((e=>e.type===H.Ey.Custom)),popupType:t.popupType})),(()=>({selectItem:new Gi.m(me,fe).selectItem})))(Ui.Z),Hi=i(22),Ji=i(9123),Ki=i(3538),Xi=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},en=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let tn=class extends X.w3{constructor(){super(...arguments),this.dialogIndex=0,this.formChanged=!1}get dialogConfiguration(){return{title:this.componentName,showFooter:!0,applyButtonText:this.$_localizationService.getLocalization("widgetproperties.apply"),cancelButtonText:this.$_localizationService.getLocalization("widgetproperties.cancel"),tabs:null,theme:this.dialogTheme,showLoader:!1,dialogIndex:this.dialogIndex,openedDialogsCount:this.dialogsCount,width:"600px",maximized:!1,setPosition:!1}}get modalDialogStyles(){return this.dialogsCount>1?{}:{top:0,left:0,bottom:0,right:0,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10200}}get dialogMessages(){return{unsavedChanges:this.$_localizationService.getLocalization("modalDialog.close.confirmation"),loaderMessage:this.$_localizationService.getLocalization("modaldialogs.loading"),closeTooltip:this.$_localizationService.getLocalization("typelist.closeTooltip")}}async mounted(){(0,Ki.J)(document),await this.fetchMarkup(this.dialogIndex,this.propertiesFormUrl,this.properties)}beforeDestroy(){0===this.dialogIndex&&(0,Ki.h)(document)}async onSubmitPropertiesForm(e){await this.submitDialogForm(this.dialogIndex,e.detail.configurationForm.getAttribute("action"),this.properties,e.detail.formData)}onFormChange(){this.formChanged=!0}onDialogClose(){this.closeDialog(this.dialogIndex)}async onDialogApply(){await this.$refs.propertiesForm.validateProperties()}};Xi([(0,X.fI)(),en("design:type",String)],tn.prototype,"formMarkup",void 0),Xi([(0,X.fI)(),en("design:type",Object)],tn.prototype,"properties",void 0),Xi([(0,X.fI)(),en("design:type",String)],tn.prototype,"propertiesFormUrl",void 0),Xi([(0,X.fI)(),en("design:type",String)],tn.prototype,"componentName",void 0),Xi([(0,X.fI)(),en("design:type",Boolean)],tn.prototype,"formIsValid",void 0),Xi([(0,X.fI)(),en("design:type",String)],tn.prototype,"dialogId",void 0),Xi([(0,X.fI)(),en("design:type","function"==typeof(Qi=void 0!==s.Q2&&s.Q2)?Qi:Object)],tn.prototype,"dialogTheme",void 0),Xi([(0,X.fI)(),en("design:type",Number)],tn.prototype,"dialogsCount",void 0),Xi([(0,X.fI)(),en("design:type",Function)],tn.prototype,"closeDialog",void 0),Xi([(0,X.fI)(),en("design:type",Function)],tn.prototype,"fetchMarkup",void 0),Xi([(0,X.fI)(),en("design:type",Function)],tn.prototype,"submitDialogForm",void 0),tn=Xi([X.wA],tn);var nn=tn,on=(0,Ve.Z)(nn,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("kentico-modal-dialog",{style:e.modalDialogStyles,attrs:{id:e.dialogId},domProps:{configuration:e.dialogConfiguration,messages:e.dialogMessages,isModified:e.formChanged},on:{apply:e.onDialogApply,close:e.onDialogClose}},[i("kentico-properties-form",{ref:"propertiesForm",domProps:{localizationService:e.$_localizationService,formMarkup:e.formMarkup,componentName:e.componentName,isValid:e.formIsValid,theme:e.dialogTheme,openedDialogsCount:e.dialogsCount},on:{submitPropertiesForm:e.onSubmitPropertiesForm,formChange:e.onFormChange}})],1)}),[],!1,null,null,null),rn=on.exports,an=i(2307),sn=i.n(an),ln=i(3245),dn=i(4313);class cn{constructor(e){this.setSectionPropertiesThunk=e,this.submitPropertiesDialogForm=(e,t,i,n)=>async(o,r,a)=>{try{const a=await(0,dn.M)(t,n);if(this.isFormValid(a)){const{modalDialogs:t}=r(),n=t.dialogs[e],s=Object.assign({},i,a.data.properties);if(!sn()(i,s)){const e=this.setSectionPropertiesThunk;await o(e(n.identifier,s));const t=W.ey;await ue(o,r(),t.formIdentifier.toString())}o((0,Hi.nf)(e))}else o((0,ln.tL)(e)),o((0,ln.wD)(e,a.data))}catch(e){a.logger.logException(e)}},this.isFormValid=e=>"valid"===e.status}}var un=(0,G.$)((e=>{const{modalDialogs:t}=e,i=t.dialogs[0];if(!i)return null;const{type:n,markup:o,isValid:r,title:a,markupUrl:s,model:l}=i;return{componentName:a,dialogId:Ji.po,dialogType:n,dialogTheme:t.theme,formMarkup:o,properties:l,propertiesFormUrl:s,formIsValid:r,dialogsCount:t.dialogs.length}}),(()=>({closeDialog:Hi.nf,fetchMarkup:Hi.fh,submitDialogForm:new cn(Hi.Tv).submitPropertiesDialogForm})))(rn),fn=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},pn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let gn=class extends X.w3{};fn([(0,X.fI)(),pn("design:type",Boolean)],gn.prototype,"showPropertiesDialog",void 0),gn=fn([(0,X.wA)({components:{PropertiesDialog:un,GlobalComponentWrapper:Yi}})],gn);var vn=gn,yn=(0,Ve.Z)(vn,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("GlobalComponentWrapper",[e.showPropertiesDialog?i("PropertiesDialog"):e._e()],1)}),[],!1,null,null,null),hn=yn.exports;var mn=(0,G.$)((({modalDialogs:e})=>({showPropertiesDialog:!!e.dialogs.length&&e.dialogs[0].type!==H.Ey.Custom})))(hn),wn=i(6785),bn=i(2759),Rn=i(5102),In=i(6166);const Cn=e=>{e&&e.toolbarButtons&&kn(e)},kn=e=>{const t=[bn.wQ],i=[Rn.t6,Rn.MJ],n=[Rn.y_,Rn.uW,In.U3,Rn.Um];if(Array.isArray(e.imageEditButtons)&&(e.imageEditButtons=e.imageEditButtons.filter((e=>!t.includes(e)))),Array.isArray(e.quickInsertButtons)&&(e.quickInsertButtons=e.quickInsertButtons.filter((e=>!i.includes(e)))),Array.isArray(e.toolbarButtons))e.toolbarButtons=e.toolbarButtons.filter((e=>!n.includes(e)));else if((0,wn.Z)(e.toolbarButtons))for(const t of Object.values(e.toolbarButtons))t&&t.buttons&&(t.buttons=t.buttons.filter((e=>!n.includes(e))))};var En,On,Sn,Pn=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},jn=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Vn=function(e,t){return function(i,n){t(i,n,e)}};let An=class extends Z.I{constructor(e,t,i){super(e,t,i)}async initializeFormBuilder(e){const t=new Di(e.formIdentifier,e.propertiesEditorEndpoint,e.validationRuleMetadataEndpoint,e.validationRuleMarkupEndpoint,e.visibilityConditionMarkupEndpoint,e.saveMessageClientId,e.applicationPath,e.configurationEndpoints,e.metadataEndpoint,e.allowedOrigins,e.propertiesEditorClientId,e.constants),i=await super.initialize(t,(t=>Zi(t,e.developmentMode)),mn,yt,we,ve),n=(0,G.F)(i);this.initializePropertiesEditor(n,t),this.initializeSaveMessage(n,t),this.registerFormScrollListener(i),document.addEventListener(K.NC,(({target:t,detail:i})=>{(0,J.Y)(t,i,Cn,e.htmlSanitizer,!1)}))}initializePropertiesEditor(e,t){new $.default({components:{PropertiesEditor:Pi},el:`#${t.propertiesEditorClientId}`,mixins:[e]})}initializeSaveMessage(e,t){new $.default({components:{SaveMessage:_i},el:`#${t.saveMessageClientId}`,mixins:[e]})}registerFormScrollListener(e){const t=document.body.querySelector(".ktc-form-builder-mvc-form");t.addEventListener("scroll",(()=>{const{popup:i}=e.getState(),n=(null==i?void 0:i.popupType)===H.kQ.AddWidget?t.querySelector("kentico-add-component-button[is-active]"):(null==i?void 0:i.popupType)===H.kQ.AddSection?t.querySelector("kentico-section-divider[active]").shadowRoot.querySelector("kentico-add-component-button[is-active]"):null;if(n){const t=(0,Q.o)(n.getBoundingClientRect());e.dispatch((0,Y.FO)(i.position,t))}}))}};An=Pn([(0,l.b)(),Vn(0,(0,q.f)(s.rv.LocalizationService)),Vn(1,(0,q.f)(s.rv.PageConfigurationService)),Vn(2,(0,q.f)(s.rv.MessagingService)),jn("design:paramtypes",["function"==typeof(En=void 0!==U.LocalizationService&&U.LocalizationService)?En:Object,"function"==typeof(On=void 0!==M.N&&M.N)?On:Object,"function"==typeof(Sn=void 0!==a.o&&a.o)?Sn:Object])],An),(0,o.XZ)(B),window.kentico=window.kentico||{},window.kentico.formBuilder={init:async e=>{const t=(0,o.f0)(An);await t.initializeFormBuilder(e)}}}},i={};function n(e){var o=i[e];if(void 0!==o)return o.exports;var r=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=t,e=[],n.O=function(t,i,o,r){if(!i){var a=1/0;for(c=0;c<e.length;c++){i=e[c][0],o=e[c][1],r=e[c][2];for(var s=!0,l=0;l<i.length;l++)(!1&r||a>=r)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(s=!1,r<a&&(a=r));if(s){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[i,o,r]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e={151:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,r,a=i[0],s=i[1],l=i[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(l)var c=l(n)}for(t&&t(i);d<a.length;d++)r=a[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},i=self.webpackChunkpage_builder=self.webpackChunkpage_builder||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var o=n.O(void 0,[216,447],(function(){return n(1992)}));o=n.O(o)}();